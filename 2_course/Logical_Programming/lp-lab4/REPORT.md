#№ Отчет по лабораторной работе №4
## по курсу "Логическое программирование"

## Обработка естественного языка

### студент: Каширин К.Д.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|   24.12      |      5        |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*


## Введение
На сегодняшний день существует множество подохдоов к обработке естественного языка, однако в общем случае обработка языков до сих пор не имеет решения. Основными проблемами при обработке естественного языка - это интерпретирование текста, соблюдая знания грамматики языка, и обучение пониманию вопросов. Одним из известных подходов естественного языка является алгоритм конечных автоматов. Иногда делают разбор с помощью построения дерева грамматического разбора. Как раз, Пролог, очень хорошо подходит для этого, поскольку имеет древовидное представление структур данных. Языки логического программирования также отлично справляются с перебором возможных вариантов, которые могут возникнуть в процессе обработки естественного языка, и отбрасыванием лишних вариантов.

## Задание

Реализовать разбор фраз языка (вопросов), выделяя в них неизвестный объекты.

Запрос:
```prolog
?- an_q(["Кто", "любит", "шоколад"], X).
?- an_q(["Где", "лежат", "деньги"], X).
?- an_q(["Что", "любит", "Даша"], X).
```
Результат:
```prolog
X='любить'(agent(Y),object('шоколад')),
Х='лежать'(object('деньги'),loc(Y)),
Х='любить'(agent('Даша'),object(Y)).
```

## Принцип решения

Фраза задается списком, который разбивается на три части: вопрос, глагол, объект/человек. Это делает предикат `split`.
```prolog
splitting([],_,_).
splitting([X|Y],Y,X).

split(Q,Question,Verb,Word):-
    splitting(Q,X,Question), 
    splitting(X,Y,Verb),
    splitting(Y,Z,Word).
```
Для глагола создадим словарь, которые будет в зависимости от глагола, с помощью предикатов, будет приводить глагол к инфинитиву. Для структуры словаря используется оператор `:-op(200, xfy, ':').` Сам словарь имеет структуру искомая форма - форма слова - вариации слова в этой форме.
```prolog
gen_verb(File):-
  File=[
  'любить':verb_inf('неинф'):['люблю','любишь','любит','любим','любят','любил','любила', 'любили'],
  'лежать':verb_inf('неинф'):['лежу','лежишь','лежит','лежим','лежат','лежал', 'лежали']
  ].
```
Для поиска слова в словаре я реализовал предикат `find`, который ищет слово по всему словарю из вариаций, и `condition`, который ищет и выделяет искомое слово в конкретной строке словаря.
```prolog
find(Verb, New_verb, Verb_inf, File):-
  member(X, File),
  condition(Verb, New_verb, Verb_inf, X).

condition(Verb, New_verb, Verb_inf, New_verb:Verb_inf:List):-
  member(Verb, List).
```
Далее я реализовал основной предикат `an_q` , который дает ответ на вопрос. Т.к. мы имеем три вопроса, то я сделал три предиката, каждый из которых для конкретного вопроса. Например, если мы зададим запрос `?- an_q(['Кто', 'любит', 'шоколад','?'],X).` , то сначала мы обрабатываем вопрос, делим его на три части, далее делаем проверку на корректность вопроса, и на существование такого человека в фактах. После в словаре ищем инфинитив для данного глагола. После с помощью встроенного в Prolog предиката `concat` строим строку, которая будет присвоена переменной X.
```prolog
an_q(Q,X):- 
  split(Q, Question, Verb, Word),
  Question == 'Кто', object(Word), 
  verb(New_verb, verb_inf('неинф'), Verb), 
  concat(New_verb, "(agent(Y), object(", Y),
  concat(Y, Word, Z),
  concat(Z, ")).", X).
```
Аналогично работает предикат `an_q` для вопроса Что? и Где?. Отличием является проверка вопроса и составление строки X.

## Результаты
Результаты программы:
```prolog
?- an_q(['Что', 'любит', 'Даша','?'],X).
X = 'любить(agent(Даша),object(Y)).' .

?- an_q(['Где', 'лежат', 'деньги','?'],X).
X = 'лежать(object(деньги),loc(X)).' .

?- an_q(['Кто', 'любит', 'шоколад','?'],X).
X = 'любить(agent(Y), object(шоколад)).' .
```

## Выводы
Во время выполнения данной лабораторной я смог реализовать грамматику языка для некоторой маленькой части русского языка, разобрался в словаре и написал правила для анализа глаголов. Если мы знаем структуру предложений, то Prolog идеально подходит, чтобы распарсить это предложение. С помощью этого можно легко выделить необходимую информацию, разобрать слово на составляющие, посчитать количество слов, определить часть его речи, привести к начальной форме. Использование этого языка для парсинга связано с его простотой реализации процесса переборов. В Prologe удобно описать общие грамматические правила, а уже затем проверять входные данные на соответствие этим правилам.




